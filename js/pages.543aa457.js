(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages"],{"4dfc":function(t,e,a){},"5df3":function(t,e,a){"use strict";var r=a("02f4")(!0);a("01f9")(String,"String",(function(t){this._t=String(t),this._i=0}),(function(){var t,e=this._t,a=this._i;return a>=e.length?{value:void 0,done:!0}:(t=r(e,a),this._i+=t.length,{value:t,done:!1})}))},8136:function(t,e,a){"use strict";a.r(e);for(var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row"},[a("metamask"),t._l(t.statsCards,(function(t){return a("div",{key:t.title,staticClass:"col-lg-4"},[a("stats-card",{attrs:{title:t.title,"sub-title":t.subTitle,type:t.type,icon:t.icon}})],1)})),a("div",{staticClass:"col-lg-4",class:{"text-right":t.isRTL}},[a("card",{attrs:{type:"chart"}},[a("template",{slot:"header"},[a("h3",{staticClass:"card-title"},[t._v("Energy generated (kwH)")])]),a("div",{staticClass:"chart-area"},[a("line-chart",{ref:"enegeryGeneratedChart",staticStyle:{height:"100%"},attrs:{"chart-data":t.enegeryGeneratedChart.chartData,"gradient-colors":t.enegeryGeneratedChart.gradientColors,"gradient-stops":t.enegeryGeneratedChart.gradientStops,"extra-options":t.enegeryGeneratedChart.extraOptions}})],1)],2)],1),a("div",{staticClass:"col-lg-4",class:{"text-right":t.isRTL}},[a("card",{attrs:{type:"chart"}},[a("template",{slot:"header"},[a("h3",{staticClass:"card-title"},[t._v("Payouts (USD)")])]),a("div",{staticClass:"chart-area"},[a("line-chart",{ref:"earningsChart",staticStyle:{height:"100%"},attrs:{"chart-data":t.earningsChart.chartData,"gradient-colors":t.earningsChart.gradientColors,"gradient-stops":t.earningsChart.gradientStops,"extra-options":t.earningsChart.extraOptions}})],1)],2)],1),a("div",{staticClass:"col-lg-4",class:{"text-right":t.isRTL}},[a("card",{attrs:{type:"chart"}},[a("template",{slot:"header"},[a("h3",{staticClass:"card-title"},[t._v("Performance (APY)")])]),a("div",{staticClass:"chart-area"},[a("line-chart",{ref:"performanceChart",staticStyle:{height:"100%"},attrs:{"chart-data":t.performanceChart.chartData,"gradient-stops":t.performanceChart.gradientStops,"extra-options":t.performanceChart.extraOptions}})],1)],2)],1),a("div",{staticClass:"row"},t._l(t.projectCards,(function(e){return a("div",{key:e.title,staticClass:"col-md-6"},[a("card",[a("template",{slot:"header"},[a("h3",{staticClass:"card-title"},[t._v(t._s(e.title))])]),a("tabs",{staticClass:"row",attrs:{type:"primary",tabNavWrapperClasses:"col-lg-3 col-md-6",tabContentClasses:"col-md-8",vertical:"",square:""}},[a("tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"tim-icons icon-globe-2"}),t._v("Description ")]),a("img",{attrs:{src:"img/Solar.jpg"}}),a("br"),a("br"),t._v(" "+t._s(e.description)+" ")]),a("tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"tim-icons icon-globe-2"}),t._v("News ")]),a("img",{attrs:{src:"img/Solar.jpg"}}),a("br"),a("br"),t._v(" "+t._s(e.news)+" ")]),a("tab-pane",[a("span",{attrs:{slot:"label"},slot:"label"},[a("i",{staticClass:"tim-icons icon-notes"}),t._v("Details ")]),t._v(" "+t._s(e.details)+" "),a("table",{staticStyle:{width:"100%"}},[a("br"),a("tr",[a("td",[a("div",{attrs:{title:"project costs infos here"}},[t._v(" Location "),a("sup",[a("i",{staticClass:"tim-icons icon-alert-circle-exc"})])])]),a("td",[t._v(t._s(e.location))])]),a("tr",[a("td",[a("div",{attrs:{title:"project costs infos here"}},[t._v(" Estimated energy per year "),a("sup",[a("i",{staticClass:"tim-icons icon-alert-circle-exc"})])])]),a("td",[t._v(t._s(e.energyEstimation)+" kwH")])]),a("tr",[a("td",[a("div",{attrs:{title:"Estimated energy per year infos here"}},[t._v(" Project costs "),a("sup",[a("i",{staticClass:"tim-icons icon-alert-circle-exc"})])])]),a("td",[t._v(t._s(e.costs)+" $")])]),a("tr",[a("div",{attrs:{title:"price per kWh infos here"}},[t._v(" System power "),a("sup",[a("i",{staticClass:"tim-icons icon-alert-circle-exc"})])]),a("td",[t._v(t._s(e.power)+" kwp")])]),a("tr",[a("div",{attrs:{title:"service fees infos here"}},[t._v(" Expected lifetime "),a("sup",[a("i",{staticClass:"tim-icons icon-alert-circle-exc"})])]),a("td",[t._v(t._s(e.expectedLifetime)+" years")])]),a("tr",[a("div",{attrs:{title:"service fees infos here"}},[t._v(" Price per kwH "),a("sup",[a("i",{staticClass:"tim-icons icon-alert-circle-exc"})])]),a("td",[t._v(t._s(e.pricePerKwH)+" $")])]),a("tr",[a("div",{attrs:{title:"service fees infos here"}},[t._v(" APY "),a("sup",[a("i",{staticClass:"tim-icons icon-alert-circle-exc"})])]),a("td",[t._v(t._s(e.apy)+" %")])])])])],1)],2)],1)})),0)],2)},s=[],o=(a("5df3"),a("4917"),a("c5f6"),a("96cf"),a("3b8d")),i=(a("7f7f"),a("6b54"),a("ac6a"),a("bf12")),n=a("6636"),c=a("93b4"),l=a("a96d"),p=a("a173"),d=a("506d"),h=a("804b"),u=a("db49"),m=a("2af9"),g=a("bc3a"),b=a.n(g),f=a("f897"),y=a("4769"),C=[],v=new Date,_=5;_>=0;_--){var w=new Date;w.setMonth(v.getMonth()-_),C.push(w.toLocaleString("default",{month:"short"}))}var k={show:!1,text:"Show more projects",components:{LineChart:n["a"],StatsCard:h["a"],TaskList:l["a"],CountryMapCard:d["a"],UserTable:p["a"],TabPane:m["j"],Tabs:m["k"],Collapse:m["e"],CollapseItem:m["f"],Metamask:y["a"]},data:function(){return{text:"Show more projects",showMore:!1,enegeryGeneratedChart:{extraOptions:c["e"],chartData:{labels:C,datasets:[{label:"kWh generated up to this month by all projects",fill:!0,borderColor:u["a"].colors.primary,borderWidth:2,borderDash:[],borderDashOffset:0,pointBackgroundColor:u["a"].colors.primary,pointBorderColor:"rgba(255,255,255,0)",pointHoverBackgroundColor:u["a"].colors.primary,pointBorderWidth:20,pointHoverRadius:4,pointHoverBorderWidth:15,pointRadius:4,data:[0,0,0,0,0,0]}]},gradientColors:u["a"].colors.primaryGradient,gradientStops:[1,.2,0]},earningsChart:{extraOptions:c["e"],chartData:{labels:C,datasets:[{label:"kWh generated up to this month by all projects",fill:!0,borderColor:u["a"].colors.primary,borderWidth:2,borderDash:[],borderDashOffset:0,pointBackgroundColor:u["a"].colors.primary,pointBorderColor:"rgba(255,255,255,0)",pointHoverBackgroundColor:u["a"].colors.primary,pointBorderWidth:20,pointHoverRadius:4,pointHoverBorderWidth:15,pointRadius:4,data:[0,0,0,0,0,0]}]},gradientColors:u["a"].colors.primaryGradient,gradientStops:[1,.2,0]},performanceChart:{extraOptions:c["b"],chartData:{labels:C,datasets:[{label:"Amount of â‚¬ generated up to this month",fill:!0,borderColor:u["a"].colors.danger,borderWidth:2,borderDash:[],borderDashOffset:0,pointBackgroundColor:u["a"].colors.danger,pointBorderColor:"rgba(255,255,255,0)",pointHoverBackgroundColor:u["a"].colors.danger,data:[7,7,6,7,7,7]}]},gradientColors:["rgba(66,134,121,0.15)","rgba(66,134,121,0.0)","rgba(66,134,121,0)"],gradientStops:[1,.4,0]}}},computed:{projectCards:function(){var t=[];return console.log("cards"),console.log(this.$store.state.projects),this.$store.state.projects.forEach((function(e){t.push({title:e.name.toString(),news:"to add",description:e.details,costs:String(e.hardwareCosts+e.installationCosts+e.planningCosts),expectedLifetime:e.predictedLifetime,pricePerKwH:String(e.priceKwh),power:String(e.power),energyEstimation:String(e.outcomePredictionSum),apy:e.apy,location:String(e.location)})})),t},statsCards:function(){return[{title:this.$store.state.apy.toString(),subTitle:"Average APY ",type:"warning",icon:"tim-icons icon-single-02"},{title:this.$store.state.tokenSupplyTotal.toString()+" USD",subTitle:"Total Fund Size",type:"info",icon:"tim-icons icon-bulb-63"},{title:this.$store.state.tokenHolderTotal.toString(),subTitle:"Investors",type:"primary",icon:"tim-icons icon-user-run"},{title:this.$store.state.numberOfProjects.toString(),subTitle:"Total Solar Projects",type:"danger",icon:"tim-icons icon-spaceship"},{title:this.$store.state.totalEnergyGenerated.toString()+" kwh",subTitle:"Total Energy Generated",type:"success",icon:"tim-icons icon-trophy"},{title:this.$store.state.totalCO2Avoided.toString()+" kg",subTitle:"Total Co2",type:"warning",icon:"tim-icons icon-watch-time"}]},enableRTL:function(){return this.$route.query.enableRTL},isRTL:function(){return this.$rtl.isRTL}},methods:{toggleText:function(){"Show more projects"==this.text?(this.text="Show fewer projects",this.showMore=!0):(this.text="Show more projects",this.showMore=!1)}},mounted:function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(){var e,a,r,s,n,c,l,p,d,h,m,g,y,v,_,w,k,S,x,T,D,j,$,P,B;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return p=function(t,e){return(t%e+e)%e},t.next=3,b.a.get("https://ropsten.etherscan.io/token/generic-tokenholders2?a="+f["b"]);case 3:return e=t.sent.data,a=Number(e.match(/(?<=A total of [\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)[\s\S]*?(?=[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*token holder)/g)[0]),console.log(a),this.$store.dispatch("getTokenHolderTotal",a),r=[],t.next=10,b.a.get("https://acren.org/listProjectAssetIds.php");case 10:return s=t.sent.data.metadata,c=0,l=[0,0,0,0,0,0],t.next=15,Promise.all(s.projects.map(function(){var t=Object(o["a"])(regeneratorRuntime.mark((function t(e){var a,s,o,i,d;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b.a.get("https://acren.org/project_details.php");case 3:return a=t.sent.data[0].asset.data,n={assetID:e,name:a.project_name,beneficiary:a.beneficiary_id,location:a.location,planningCosts:a.planning_cost_in_USD,hardwareCosts:a.hardware_cost_in_USD,installationCosts:a.installation_cost_in_USD,maintenanceCostsAnnually:a.annual_maintenance_cost_in_USD,outcomePredictionFull:a.predicted_outcome_table,power:a.system_power_in_kwp,outcomePredictionSum:a.predicted_outcome_per_year_in_kwh,priceKwh:a.fair_price_start_per_kwh_in_USD,predictedLifetime:a.expected_lifetime_in_years,apy:a.annual_percentage_yield,details:a.details},t.next=7,b.a.get("https://acren.org/measurements.php");case 7:s=t.sent.data[0],c+=s.metadata.summary.kwh_total,o=s.metadata.summary.kwh_by_year,i=(new Date).getUTCFullYear(),d=(new Date).getMonth(),o.forEach((function(t){if(t.year==i)for(var e=0;e<6;e++)l[e]+=t.kwh_by_month[p(d-(5-e),t.kwh_by_month.length)].kwh})),r.push(n),t.next=19;break;case 16:t.prev=16,t.t0=t["catch"](0),console.log("error"+t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})));return function(e){return t.apply(this,arguments)}}()));case 15:for(this.$store.dispatch("addProjects",r),d=(.6*c).toFixed(2),this.$store.dispatch("addNumberOfProjects",r.length),this.$store.dispatch("addTotalEnergyGenerated",c),this.$store.dispatch("addTotalCO2Avoided",d),this.$store.dispatch("setPendingProject",n),console.log(this.$store.state.pendingProject),this.enegeryGeneratedChart.chartData={labels:C,datasets:[{label:"kWh generated up to this month by all projects",fill:!0,borderColor:u["a"].colors.primary,borderWidth:2,borderDash:[],borderDashOffset:0,pointBackgroundColor:u["a"].colors.primary,pointBorderColor:"rgba(255,255,255,0)",pointHoverBackgroundColor:u["a"].colors.primary,pointBorderWidth:20,pointHoverRadius:4,pointHoverBorderWidth:15,pointRadius:4,data:l}]},h=[],m=5;m>=0;m--)g=new Date,g.setMonth(g.getMonth()-m),g.setDate(1),g.setHours(0,0,0),g.setMilliseconds(0),h.push({timestamp:g,payouts:0});if(0!=this.$store.state.tokenSupplyTotal){t.next=30;break}return t.next=28,this.$store.state.contractInstance().methods.totalSupply().call();case 28:y=t.sent,this.$store.dispatch("setTokenSupplyTotal",y);case 30:if(void 0!=this.$store.state.beneficiaryPayout[0]){t.next=78;break}return console.log("hier"),t.next=34,this.$store.state.contractInstance().getPastEvents("PaymentReceived",{fromBlock:1});case 34:v=t.sent,console.log("beneficiracy..."),console.log(v),_=[],w=!0,k=!1,t.prev=40,x=Object(i["a"])(v);case 42:return t.next=44,x.next();case 44:return T=t.sent,w=T.done,t.next=48,T.value;case 48:if(D=t.sent,w){t.next=61;break}return j=D,t.t0=_,t.t1=j.returnValues.amount,t.next=55,this.$store.state.web3.web3Instance().eth.getBlock(j.blockNumber);case 55:t.t2=t.sent.timestamp,t.t3={amountUSD:t.t1,timestamp:t.t2},t.t0.push.call(t.t0,t.t3);case 58:w=!0,t.next=42;break;case 61:t.next=67;break;case 63:t.prev=63,t.t4=t["catch"](40),k=!0,S=t.t4;case 67:if(t.prev=67,t.prev=68,w||null==x.return){t.next=72;break}return t.next=72,x.return();case 72:if(t.prev=72,!k){t.next=75;break}throw S;case 75:return t.finish(72);case 76:return t.finish(67);case 77:this.$store.dispatch("beneficiaryPayoutEvents",_);case 78:for(console.log(9),$=this.$store.state.beneficiaryPayout.map((function(t,e){return Object.assign({index:e},t)})),$.forEach((function(t,e){switch(console.log(t.timestamp),console.log(h[5].timestamp.getTime()/1e3),!0){case h[0].timestamp.getTime()/1e3<=t.timestamp&&t.timestamp<h[1].timestamp.getTime()/1e3:h[0].payouts+=parseInt(t.amountUSD);break;case h[1].timestamp.getTime()/1e3<=t.timestamp&&t.timestamp<h[2].timestamp.getTime()/1e3:h[1].payouts+=parseInt(t.amountUSD);break;case h[2].timestamp.getTime()/1e3<=t.timestamp&&t.timestamp<h[3].timestamp.getTime()/1e3:h[2].payouts+=parseInt(t.amountUSD);break;case h[3].timestamp.getTime()/1e3<=t.timestamp&&t.timestamp<h[4].timestamp.getTime()/1e3:h[3].payouts+=parseInt(t.amountUSD);break;case h[4].timestamp.getTime()/1e3<=t.timestamp&&t.timestamp<h[5].timestamp.getTime()/1e3:h[4].payouts+=parseInt(t.amountUSD);break;case t.timestamp>h[5].timestamp.getTime()/1e3:h[5].payouts+=parseInt(t.amountUSD);break}})),P=[0,0,0,0,0,0],B=0;B<6;B++)P[B]=this.$store.state.web3.web3Instance().utils.fromWei(h[B].payouts.toString());this.earningsChart.chartData={labels:C,datasets:[{label:"kWh generated up to this month by all projects",fill:!0,borderColor:u["a"].colors.primary,borderWidth:2,borderDash:[],borderDashOffset:0,pointBackgroundColor:u["a"].colors.primary,pointBorderColor:"rgba(255,255,255,0)",pointHoverBackgroundColor:u["a"].colors.primary,pointBorderWidth:20,pointHoverRadius:4,pointHoverBorderWidth:15,pointRadius:4,data:P}]},this.i18n=this.$i18n,this.enableRTL&&(this.i18n.locale="ar",this.$rtl.enableRTL());case 85:case"end":return t.stop()}}),t,this,[[40,63,67,77],[68,,72,76]])})));function e(){return t.apply(this,arguments)}return e}(),beforeDestroy:function(){this.$rtl.isRTL&&(this.i18n.locale="en",this.$rtl.disableRTL())}},S=k,x=a("2877"),T=Object(x["a"])(S,r,s,!1,null,null,null);e["default"]=T.exports}}]);
//# sourceMappingURL=pages.543aa457.js.map